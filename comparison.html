<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  
  <link rel="stylesheet" href="style.css">
  <title>Language Comparison</title>

  <style>

    body{
    margin: 0;
    background: linear-gradient(135deg, rgba(26, 58, 95, 0.15) 0%, rgba(125, 218, 135, 0.2) 100%);
    background-attachment: fixed;
    min-height: 100vh;
    font-family: 'Courier New', Courier, monospace;
    }


    .lang{
        font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif ;
    }

    .container {
      max-width: 1100px;
      margin: auto;
      padding: 18px 16px 50px;
    }

    h1 {
    font-family: 'Inter', sans-serif;
    text-align: center;
    margin: auto;
    margin-top: 5%;
    margin-bottom: 5%;
    }

    .card {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 1) 100%);
      border: 2px solid rgba(26, 58, 95, 0.3);
      box-shadow: 0 10px 22px rgba(26, 58, 95, 0.25);
      border-radius: 16px;
      padding: 14px;
      margin-top: 50px;
    }

    .row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: end;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-size: 13px;
      color: #51606c;
    }

    select {
      width: 240px;
      max-width: 70vw;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,.12);
      background: #fff;
    }

    button {
      height: 42px;
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,.12);
      background: #fff;
      cursor: pointer;
    }

    canvas {
      display: block;
      width: 100%;
      max-width: 100%;
      margin-top: 12px;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,.12);
      background: #fff;
    }

    .frameworks-section {
      margin-top: 30px;
      padding-top: 30px;
      border-top: 1px solid rgba(0,0,0,.12);
    }

    .frameworks-section h3 {
      font-family: 'Inter', sans-serif;
      font-size: 20px;
      margin-bottom: 20px;
      color: #222;
    }

    .frameworks-comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
    }

    .framework-group h4 {
      font-family: 'Inter', sans-serif;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 12px;
      color: #1a3a5f;
    }

    .framework-group ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .framework-group li {
      padding: 8px 12px;
      margin-bottom: 6px;
      background: linear-gradient(135deg, rgba(26, 58, 95, 0.15) 0%, rgba(125, 218, 135, 0.2) 100%);
      border: 1px solid rgba(26, 58, 95, 0.25);
      border-radius: 8px;
      font-size: 14px;
      color: #444;
      transition: all 0.2s ease;
    }
    
    .framework-group li:hover {
      background: linear-gradient(135deg, rgba(26, 58, 95, 0.25) 0%, rgba(125, 218, 135, 0.3) 100%);
      border-color: rgba(125, 218, 135, 0.5);
    }

    .hidden {
      display: none;
    }

    
  </style>
</head>

<body>

  <nav class="navbar">
    <a href="home.html" class="navbar-logo">
      <img src="logo.svg" alt="CodeCompass Logo">
      <span class="navbar-logo-text">
        <span class="code">Code</span><span class="compass">Compass</span>
      </span>
    </a>
    <div class="nav-left">
      <a class="nav-link" href="home.html">Home</a>
      <a class="nav-link" href="programming-languages.html">Languages</a>
      <a class="nav-link active" href="comparison.html">Comparison</a>
      <a class="nav-link" href="about-us.html">About Us</a>
    </div>
  </nav>


  <main class="container">
    <section>
      <h1>Compare Two Programming Languages</h1>
    </section>

    <section class="card">
      <div class="row">
        <div>
          <label for="langA" class="lang">Language A</label>
          <select id="langA"></select>
        </div>

        <div>
          <label for="langB" class="lang">Language B</label>
          <select id="langB"></select>
        </div>

        <button id="compareBtn" type="button">Compare</button>
      </div>

      <canvas id="chart"></canvas>
      
      <div id="frameworksSection" class="frameworks-section hidden">
        <h3>Popular Frameworks</h3>
        <div class="frameworks-comparison">
          <div class="framework-group">
            <h4 id="langAFrameworksTitle"></h4>
            <ul id="langAFrameworks"></ul>
          </div>
          <div class="framework-group">
            <h4 id="langBFrameworksTitle"></h4>
            <ul id="langBFrameworks"></ul>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>

    let data = {};
    
    const categories = [
      { key: "memoryUsage", label: "Memory usage" },
      { key: "efficiency",  label: "Efficiency"  },
      { key: "performance", label: "Performance"  }
    ];

    const colorA = "#1a3a5f";
    const colorB = "#7DDA87";

    const langA = document.getElementById("langA");
    const langB = document.getElementById("langB");
    const btn   = document.getElementById("compareBtn");

    const canvas = document.getElementById("chart");
    const ctx = canvas.getContext("2d");

    let animId = null;

    function fillSelect(selectEl) {
      const ph = document.createElement("option");
      ph.value = "";
      ph.textContent = "Select...";
      ph.disabled = true;
      ph.selected = true;
      selectEl.appendChild(ph);

      Object.keys(data).forEach(function(name) {
        selectEl.appendChild(new Option(name, name));
      });
    }

    function setupCanvas() {
      const dpr = window.devicePixelRatio || 1;
      const W = canvas.parentElement.clientWidth;
      const H = 380;

      canvas.style.width = W + "px";
      canvas.style.height = H + "px";

      canvas.width = Math.floor(W * dpr);
      canvas.height = Math.floor(H * dpr);

      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      return { W, H };
    }


    function drawEmpty() {
      const { W, H } = setupCanvas();
      ctx.clearRect(0, 0, W, H);

      ctx.font = "16px Arial";
      ctx.fillText("Chart is empty", 30, 60);

      ctx.font = "13px Arial";
      ctx.fillText("Select A and B then click Compare.", 30, 85);
    }

    function draw(aName, bName, p = 1) {
      const { W, H } = setupCanvas();
      ctx.clearRect(0, 0, W, H);

      const pad = { left: 60, right: 20, top: 45, bottom: 60 };
      const chartW = W - pad.left - pad.right;
      const chartH = H - pad.top - pad.bottom;
      const baseY  = H - pad.bottom;
      ctx.font = "18px Arial";
      ctx.fillText(aName + " vs " + bName, pad.left, 28);

      const groupGap = 70;
      const barGap = 18;
      const groupW = (chartW - groupGap * (categories.length - 1)) / categories.length;

      const barW = Math.min(34, (groupW - barGap) / 2);
      const startOffset = (groupW - (barW * 2 + barGap)) / 2;

      categories.forEach((c, i) => {
        const gx = pad.left + i * (groupW + groupGap) + startOffset;

        const aVal = data[aName][c.key];
        const bVal = data[bName][c.key];
        const aScore = Math.max(aVal / 100, 0.02);
        const bScore = Math.max(bVal / 100, 0.02);

        const aH = aScore * chartH * p;
        const bH = bScore * chartH * p;

        const ax = gx;
        const bx = gx + barW + barGap;

        ctx.fillStyle = colorA;
        ctx.fillRect(ax, baseY - aH, barW, aH);

        ctx.fillStyle = colorB;
        ctx.fillRect(bx, baseY - bH, barW, bH);

        if (p > 0.85) {
          ctx.fillStyle = "#17212b";
          ctx.font = "12px Arial";
          ctx.fillText(Math.round(aVal) + "%", ax, baseY - aH - 8);
          ctx.fillText(Math.round(bVal) + "%", bx, baseY - bH - 8);

        }

        ctx.fillStyle = "#17212b";
        ctx.font = "14px Arial";
        const tx = pad.left + i * (groupW + groupGap) + groupW / 2 - ctx.measureText(c.label).width / 2;
        ctx.fillText(c.label, tx, H - 25);
      });

    
      ctx.font = "13px Arial";
      const box = 10, gap = 6, space = 18;

      const wA = ctx.measureText("A").width;
      const wB = ctx.measureText("B").width;

      const legendW = box + gap + wA + space + box + gap + wB;
      let x = W - pad.right - legendW - 10;
      if (x < pad.left) x = pad.left;
      const y = 14;

      ctx.fillStyle = colorA;
      ctx.fillRect(x, y, box, box);
      ctx.fillStyle = "#17212b";
      ctx.fillText("A", x + box + gap, y + box - 1);

      const bx = x + box + gap + wA + space;
      ctx.fillStyle = colorB;
      ctx.fillRect(bx, y, box, box);
      ctx.fillStyle = "#17212b";
      ctx.fillText("B", bx + box + gap, y + box - 1);
    }

    function animate(a, b) {
  if (animId) cancelAnimationFrame(animId);

  const duration = 600;
  const start = performance.now();

  function frame(now) {
    const p = Math.min((now - start) / duration, 1);
    draw(a, b, p);
    if (p < 1) animId = requestAnimationFrame(frame);
  }

  animId = requestAnimationFrame(frame);
}


    drawEmpty();

    let comparisonData = {};

    fetch('ComparisonData.json')
      .then(response => response.json())
      .then(jsonData => {
        const dataObj = {};
        jsonData.languages.forEach(lang => {
          dataObj[lang.name] = {
            efficiency: lang.efficiency,
            performance: lang.performance,
            memoryUsage: lang.memoryUsage
          };
          comparisonData[lang.name] = lang;
        });
        data = dataObj;
        
        fillSelect(langA);
        fillSelect(langB);
      })
      .catch(error => {
        console.error('Error loading data:', error);
        data = {};
      });

    function displayFrameworks(aName, bName) {
      const frameworksSection = document.getElementById('frameworksSection');
      const langAFrameworks = document.getElementById('langAFrameworks');
      const langBFrameworks = document.getElementById('langBFrameworks');
      const langAFrameworksTitle = document.getElementById('langAFrameworksTitle');
      const langBFrameworksTitle = document.getElementById('langBFrameworksTitle');

      if (comparisonData[aName] && comparisonData[aName].frameworks && 
          comparisonData[bName] && comparisonData[bName].frameworks) {
        frameworksSection.classList.remove('hidden');
        
        langAFrameworksTitle.textContent = aName + ' Frameworks';
        langBFrameworksTitle.textContent = bName + ' Frameworks';
        
        langAFrameworks.innerHTML = '';
        comparisonData[aName].frameworks.forEach(framework => {
          const li = document.createElement('li');
          li.textContent = framework;
          langAFrameworks.appendChild(li);
        });

        langBFrameworks.innerHTML = '';
        comparisonData[bName].frameworks.forEach(framework => {
          const li = document.createElement('li');
          li.textContent = framework;
          langBFrameworks.appendChild(li);
        });
      } else {
        frameworksSection.classList.add('hidden');
      }
    }

    btn.addEventListener("click", () => {
      const a = langA.value;
      const b = langB.value;
      if (a && b) {
        animate(a, b);
        displayFrameworks(a, b);
      }
    });
    
  </script>
</body>
</html>
